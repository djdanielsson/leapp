---
# tasks file for analysis
- name: Ensure leapp metadata is available for disconnected Leapp upgrades
  when: leapp_upgrade_type == 'disconnected'
  block:
    - name: /etc/leapp/files directory exists
      ansible.builtin.file:
        path: /etc/leapp/files
        state: directory
        owner: root
        group: root
        mode: '0755'

    - name: Leapp utility metadata is installed
      ansible.builtin.unarchive:
        src: "{{ leapp_metadata_url }}"
        dest: /etc/leapp/files
        remote_src: true
        owner: root
        group: root

- name: Get distro-specific
  ansible.builtin.include_tasks: "analysis-{{ ansible_distribution }}{{ ansible_distribution_major_version }}.yml"
...
